<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harmony - Your Faith Workspace</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Crimson+Text:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-light: #f5f1e8;
            --dot-light: #d4c5a9;
            --bg-dark: #1a1410;
            --dot-dark: #3d3427;
            --gold: #c9a961;
            --sky: #87ceeb;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--bg-light) 0%, #e8dcc4 100%);
            background-image: radial-gradient(var(--dot-light) 1px, transparent 1px);
            background-size: 24px 24px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .dark body {
            background: linear-gradient(135deg, var(--bg-dark) 0%, #2d2419 100%);
            background-image: radial-gradient(var(--dot-dark) 1px, transparent 1px);
            background-size: 24px 24px;
        }

        .scripture-font { font-family: 'Crimson Text', serif; }
        
        .window-content::-webkit-scrollbar { width: 6px; }
        .window-content::-webkit-scrollbar-track { background: transparent; }
        .window-content::-webkit-scrollbar-thumb { background: #c9a961; border-radius: 3px; }
        .window-content::-webkit-scrollbar-thumb:hover { background: #b8975a; }

        .resize-handle {
            width: 20px;
            height: 20px;
            position: absolute;
            bottom: 0;
            right: 0;
            cursor: se-resize;
            z-index: 10;
        }

        .window {
            min-width: 320px;
            min-height: 200px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        
        .window-controls button:hover svg {
            opacity: 1 !important;
        }
        
        .desktop-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 96px;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .desktop-icon:hover {
            background: rgba(201,169,97,0.15);
            transform: translateY(-2px);
        }
        .desktop-icon span {
            font-size: 13px;
            color: #3d2817;
            margin-top: 8px;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8);
            text-align: center;
            font-weight: 500;
        }
        .dark .desktop-icon span {
            color: #f5f1e8;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .stained-glass-effect {
            /* Updated for a more milky, translucent look */
            background-color: rgba(245, 241, 232, 0.7); /* Light mode translucent background */
            backdrop-filter: blur(16px) saturate(150%);
            border: 1px solid rgba(201, 169, 97, 0.25);
        }

        .dark .stained-glass-effect {
            /* Added for better dark mode appearance */
            background-color: rgba(26, 20, 16, 0.7); /* Dark mode translucent background */
            border: 1px solid rgba(201, 169, 97, 0.2);
        }

        .dock-hover:hover {
            transform: translateY(-8px) scale(1.1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .window {
            animation: fadeIn 0.2s ease-out;
        }
        
        /* Tile View Specific CSS */
        .tile-view-container {
            position: absolute;
            top: 56px; /* Header height */
            bottom: 80px; /* Dock height + padding */
            left: 0;
            right: 0;
            overflow-y: auto;
            padding: 2rem;
        }
        
        .tiles-grid {
            display: grid;
            gap: 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
            grid-auto-rows: 150px;
            grid-template-columns: repeat(2, 1fr); /* Mobile default */
        }

        @media (min-width: 768px) {
            .tiles-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
        
        @media (min-width: 1280px) {
            .tiles-grid {
                 /* Emulate the wider layout from screenshot */
                grid-template-columns: repeat(6, 1fr);
            }
        }
        
        .tile {
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            border-radius: 0.75rem;
            color: white;
            padding: 1rem;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 150px;
        }
        
        .tile:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .tile-lg {
            grid-column: span 2;
            grid-row: span 2;
        }
        .tile-tall {
            grid-row: span 2;
        }
        .tile-wide {
            grid-column: span 2;
        }
        .tile-small {
             grid-column: span 1;
             grid-row: span 1;
        }
        
        .tile .tile-icon {
            /* Changed from absolute positioning to be part of the flex layout */
            width: 2.5rem;
            height: 2.5rem;
            opacity: 0.9;
        }
        
        .tile .tile-name {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .tile .tile-content {
            font-size: 0.85rem;
            line-height: 1.4;
            margin-top: 0.5rem;
        }
        
        /* Toggle Switch CSS */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }
        .toggle-switch input { 
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 28px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--gold);
        }
        input:checked + .slider:before {
            transform: translateX(22px);
        }
    </style>
</head>
<body class="min-h-screen text-slate-800 dark:text-slate-200">

    <!-- TOP MENU BAR -->
    <header class="fixed top-0 left-0 right-0 z-[100] h-14 border-b border-amber-900/20 dark:border-amber-200/20 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-sm">
        <div class="h-full w-full px-6">
            <div class="grid grid-cols-3 items-center h-full gap-4">
                <div class="flex items-center space-x-3 justify-start">
                    <svg class="h-8 w-8 text-amber-700 dark:text-amber-400" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5zm0 18c-3.86-.94-7-5.14-7-9V8.3l7-3.11 7 3.11V11c0 3.86-3.14 8.06-7 9zm-2-8h4v2h-4v-2zm0-4h4v2h-4V8z"/>
                    </svg>
                    <span class="font-bold text-lg text-amber-800 dark:text-amber-300 hidden sm:inline">Harmony</span>
                </div>

                <div class="flex items-center justify-center">
                    <div class="relative w-full max-w-2xl">
                        <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-amber-600/60" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                        </svg>
                        <input type="text" placeholder="Search scriptures, devotionals, prayers..." 
                            class="w-full rounded-full border border-amber-200 dark:border-amber-800 bg-amber-50/70 dark:bg-slate-800/70 py-2 pl-10 pr-4 text-sm placeholder-amber-600/60 dark:placeholder-amber-400/60 transition-all duration-300 focus:bg-white dark:focus:bg-slate-900 focus:ring-2 focus:ring-amber-500 focus:border-transparent">
                    </div>
                </div>

                <div class="flex items-center space-x-4 justify-end">
                    <!-- NEW: View Mode Toggle Switch -->
                    <label class="toggle-switch">
                      <input type="checkbox" id="view-mode-toggle" checked>
                      <span class="slider"></span>
                    </label>

                    <button class="relative p-2 rounded-full text-amber-700 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors">
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
                        </svg>
                        <span class="absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full"></span>
                    </button>
                    
                    <button id="theme-toggle" class="p-2 rounded-full text-amber-700 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors">
                        <svg id="theme-icon-light" class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
                        </svg>
                        <svg id="theme-icon-dark" class="h-6 w-6 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
                        </svg>
                    </button>
                    
                    <img src="https://i.pravatar.cc/150?u=user" alt="Profile" class="h-9 w-9 rounded-full ring-2 ring-amber-400 cursor-pointer"/>
                </div>
            </div>
        </div>
    </header>

    <!-- MAIN DESKTOP AREA -->
    <main id="desktop" class="relative h-screen w-screen pt-14 pb-24 overflow-hidden">
        <!-- Traditional Icon View (Hidden by default) -->
        <div id="desktop-icons" class="p-4 grid grid-flow-col auto-cols-max gap-x-4 gap-y-1 grid-rows-5 hidden"></div>

        <!-- Tile View (Visible by default) -->
        <div id="tile-view" class="tile-view-container">
            <div id="tiles-container" class="tiles-grid">
                <!-- Tiles will be generated here by JavaScript -->
            </div>
        </div>

        <!-- WINDOW TEMPLATES - ALL 14 APPS -->
        
        <!-- 1. Bible -->
        <template id="window-template-bible">
            <article data-app-id="bible" class="window hidden absolute flex flex-col w-[500px] h-[550px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 dark:border-amber-200/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-amber-700 dark:text-amber-400" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/>
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Holy Bible</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls group">
                        <button class="h-4 w-4 rounded-full bg-yellow-400" data-action="minimize"></button>
                        <button class="h-4 w-4 rounded-full bg-green-400" data-action="maximize"></button>
                        <button class="h-4 w-4 rounded-full bg-red-400" data-action="close"></button>
                    </div>
                </div>
                <div class="flex items-center space-x-2 p-3 bg-white/50 dark:bg-slate-800/50 border-b border-amber-900/10">
                    <select class="px-3 py-1.5 text-sm rounded-lg border border-amber-300 bg-white dark:bg-slate-700">
                        <option>NIV</option><option>KJV</option><option>ESV</option><option>NKJV</option>
                    </select>
                    <select class="px-3 py-1.5 text-sm rounded-lg border border-amber-300 bg-white dark:bg-slate-700">
                        <option>John</option><option>Genesis</option><option>Psalms</option><option>Matthew</option>
                    </select>
                    <input type="number" value="3" min="1" class="w-16 px-3 py-1.5 text-sm rounded-lg border border-amber-300 bg-white dark:bg-slate-700">
                    <button class="px-4 py-1.5 text-sm bg-amber-600 text-white rounded-lg hover:bg-amber-700">Go</button>
                </div>
                <div class="window-content flex-1 p-6 overflow-y-auto scripture-font text-base leading-relaxed">
                    <h3 class="text-xl font-bold text-amber-900 dark:text-amber-300 mb-4">John 3:16-17</h3>
                    <p class="mb-4"><sup class="text-amber-600 font-semibold">16</sup> For God so loved the world that he gave his one and only Son, that whoever believes in him shall not perish but have eternal life.</p>
                    <p><sup class="text-amber-600 font-semibold">17</sup> For God did not send his Son into the world to condemn the world, but to save the world through him.</p>
                    <div class="mt-6 p-4 bg-amber-50/50 dark:bg-amber-900/20 rounded-lg border-l-4 border-amber-600">
                        <p class="text-sm"><strong>Note:</strong> This verse is often called the "Gospel in a nutshell"</p>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>

        <!-- 2. Devotionals -->
        <template id="window-template-devotionals">
            <article data-app-id="devotionals" class="window hidden absolute flex flex-col w-[550px] h-[500px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-amber-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C10.34 2 9 3.34 9 5s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm0 14c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Daily Devotional</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls group">
                        <button class="h-4 w-4 rounded-full bg-yellow-400 flex items-center justify-center" data-action="minimize">
                            <svg class="h-2.5 w-2.5 text-yellow-800 opacity-0 group-hover:opacity-100 transition-opacity" viewBox="0 0 16 16" fill="currentColor"><path d="M14 8a.5.5 0 0 1-.5.5H2.5A.5.5 0 0 1 2 8h12Z"/></svg>
                        </button>
                        <button class="h-4 w-4 rounded-full bg-green-400 flex items-center justify-center" data-action="maximize">
                            <svg class="h-2 w-2 text-green-800 opacity-0 group-hover:opacity-100" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M4 8V4h4m12 0h-4v4m0 12v-4h4m-12 0H4v-4"/></svg>
                        </button>
                        <button class="h-4 w-4 rounded-full bg-red-400 flex items-center justify-center" data-action="close">
                            <svg class="h-2.5 w-2.5 text-red-800 opacity-0 group-hover:opacity-100 transition-opacity" viewBox="0 0 16 16" fill="currentColor"><path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/></svg>
                        </button>
                    </div>
                </div>
                <div class="window-content flex-1 p-6 overflow-y-auto">
                    <div class="text-center mb-6">
                        <p class="text-xs text-amber-600 dark:text-amber-400 mb-2">October 9, 2025</p>
                        <h3 class="text-2xl font-bold text-amber-900 dark:text-amber-200">Walking in Faith</h3>
                    </div>
                    <div class="scripture-font space-y-4">
                        <p class="italic text-amber-700 dark:text-amber-400 text-center">"Now faith is confidence in what we hope for and assurance about what we do not see." - Hebrews 11:1</p>
                        <p>Faith is not the absence of doubt, but the courage to move forward despite it.</p>
                        <div class="mt-6 p-4 bg-sky-50/50 dark:bg-sky-900/20 rounded-lg">
                            <p class="text-sm font-semibold mb-2">Reflection Questions:</p>
                            <ul class="text-sm space-y-1 list-disc list-inside">
                                <li>What step of faith is God calling you to take today?</li>
                                <li>How can you surrender your worries to Him?</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>

        <!-- 3. Prayer Journal -->
        <template id="window-template-prayer">
            <article data-app-id="prayer" class="window hidden absolute flex flex-col w-[600px] h-[550px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-sky-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Prayer Journal</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls group">
                        <button class="h-4 w-4 rounded-full bg-yellow-400 flex items-center justify-center" data-action="minimize"><svg class="h-2.5 w-2.5 text-yellow-800 opacity-0 group-hover:opacity-100 transition-opacity" viewBox="0 0 16 16" fill="currentColor"><path d="M14 8a.5.5 0 0 1-.5.5H2.5A.5.5 0 0 1 2 8h12Z"/></svg></button>
                        <button class="h-4 w-4 rounded-full bg-green-400 flex items-center justify-center" data-action="maximize"><svg class="h-2 w-2 text-green-800 opacity-0 group-hover:opacity-100" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M4 8V4h4m12 0h-4v4m0 12v-4h4m-12 0H4v-4"/></svg></button>
                        <button class="h-4 w-4 rounded-full bg-red-400 flex items-center justify-center" data-action="close"><svg class="h-2.5 w-2.5 text-red-800 opacity-0 group-hover:opacity-100 transition-opacity" viewBox="0 0 16 16" fill="currentColor"><path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/></svg></button>
                    </div>
                </div>
                <div class="window-content flex-1 p-6 overflow-y-auto space-y-4">
                    <div>
                        <label class="block text-sm font-semibold mb-2">What's on your heart today?</label>
                        <textarea class="w-full h-32 px-4 py-3 rounded-lg border border-amber-300 bg-white/80 dark:bg-slate-800/80 resize-none" placeholder="Pour out your heart to God..."></textarea>
                    </div>
                    <div class="flex space-x-2">
                        <button class="px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 text-sm font-medium">Save Prayer</button>
                        <button class="px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 text-sm font-medium">Mark Answered</button>
                    </div>
                    <div class="border-t border-amber-200 dark:border-amber-800 pt-4">
                        <h4 class="font-semibold mb-3">Recent Prayers</h4>
                        <div class="space-y-3">
                            <div class="p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg">
                                <p class="text-xs text-amber-600 mb-1">Oct 3, 2025</p>
                                <p class="text-sm">Lord, grant me wisdom in my decisions today...</p>
                            </div>
                            <div class="p-3 bg-green-50/60 dark:bg-green-900/20 rounded-lg border-l-4 border-green-600">
                                <p class="text-xs text-green-600 mb-1">Answered - Oct 1, 2025</p>
                                <p class="text-sm">Please heal my mother's illness...</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>

        <!-- 4. Faith Circles -->
        <template id="window-template-circles">
            <article data-app-id="circles" class="window hidden absolute flex flex-col w-[550px] h-[550px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-rose-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Faith Circles</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls">
                        <button class="h-4 w-4 rounded-full bg-yellow-400" data-action="minimize"></button>
                        <button class="h-4 w-4 rounded-full bg-green-400" data-action="maximize"></button>
                        <button class="h-4 w-4 rounded-full bg-red-400" data-action="close"></button>
                    </div>
                </div>
                <div class="window-content flex-1 p-6 overflow-y-auto space-y-4">
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="p-4 bg-gradient-to-br from-sky-50 to-sky-100 dark:from-sky-900/30 dark:to-sky-800/30 rounded-xl border border-sky-200 cursor-pointer hover:shadow-lg transition-all">
                            <div class="flex items-center space-x-3 mb-2">
                                <div class="h-10 w-10 bg-sky-600 rounded-full flex items-center justify-center text-white font-bold">BS</div>
                                <div>
                                    <h4 class="font-semibold text-sky-900 dark:text-sky-200">Bible Study Group</h4>
                                    <p class="text-xs text-sky-700 dark:text-sky-400">42 members</p>
                                </div>
                            </div>
                            <p class="text-sm text-sky-800 dark:text-sky-300">Currently studying Romans</p>
                        </div>
                        <div class="p-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 rounded-xl border border-purple-200 cursor-pointer hover:shadow-lg transition-all">
                            <div class="flex items-center space-x-3 mb-2">
                                <div class="h-10 w-10 bg-purple-600 rounded-full flex items-center justify-center text-white font-bold">PW</div>
                                <div>
                                    <h4 class="font-semibold text-purple-900 dark:text-purple-200">Prayer Warriors</h4>
                                    <p class="text-xs text-purple-700 dark:text-purple-400">128 members</p>
                                </div>
                            </div>
                            <p class="text-sm text-purple-800 dark:text-purple-300">24/7 prayer support</p>
                        </div>
                    </div>
                    <div class="border-t border-amber-200 dark:border-amber-800 pt-4">
                        <h4 class="font-semibold mb-3">Recent Discussions</h4>
                        <div class="space-y-3">
                            <div class="p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg hover:bg-white/80 cursor-pointer">
                                <div class="flex items-start space-x-3">
                                    <img src="https://i.pravatar.cc/150?u=sarah" class="h-8 w-8 rounded-full">
                                    <div class="flex-1">
                                        <p class="font-semibold text-sm">Sarah M.</p>
                                        <p class="text-sm mt-1">How do you all handle doubts in your faith journey?</p>
                                        <p class="text-xs text-amber-600 mt-2">12 replies • 2 hours ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>

        <!-- 5. Spiritual Companion -->
        <template id="window-template-minds">
            <article data-app-id="minds" class="window hidden absolute flex flex-col w-[500px] h-[550px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-indigo-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M21 15v4c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h16c.55 0 1 .45 1 1zm-10.5 2h-2v-2h2v2zm4.5 0h-2v-2h2v2z"/>
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Spiritual Companion</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls">
                        <button class="h-4 w-4 rounded-full bg-yellow-400" data-action="minimize"></button>
                        <button class="h-4 w-4 rounded-full bg-green-400" data-action="maximize"></button>
                        <button class="h-4 w-4 rounded-full bg-red-400" data-action="close"></button>
                    </div>
                </div>
                <div class="flex items-center space-x-2 p-3 bg-white/50 dark:bg-slate-800/50 border-b border-amber-900/10">
                    <select class="px-3 py-1.5 text-sm rounded-lg border border-amber-300 bg-white dark:bg-slate-700">
                        <option>Biblical Guide</option><option>Theological Scholar</option><option>Augustine of Hippo</option><option>C.S. Lewis</option>
                    </select>
                </div>
                <div class="window-content flex-1 p-4 overflow-y-auto space-y-4">
                    <div class="flex items-start gap-3">
                        <div class="h-8 w-8 bg-indigo-600 rounded-full flex items-center justify-center text-white text-sm font-bold">AI</div>
                        <div class="flex-1 p-3 bg-slate-200/80 dark:bg-slate-700/80 rounded-lg rounded-tl-none">
                            <p class="text-sm">Peace be with you. I'm here to help you explore Scripture and deepen your understanding of God's Word. What question is on your heart today?</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-3 justify-end">
                        <div class="flex-1 p-3 bg-amber-600 text-white rounded-lg rounded-tr-none max-w-[85%]">
                            <p class="text-sm">Can you help me understand the concept of grace in Romans 5?</p>
                        </div>
                        <img src="https://i.pravatar.cc/150?u=user" class="h-8 w-8 rounded-full">
                    </div>
                    <div class="flex items-start gap-3">
                        <div class="h-8 w-8 bg-indigo-600 rounded-full flex items-center justify-center text-white text-sm font-bold">AI</div>
                        <div class="flex-1 p-3 bg-slate-200/80 dark:bg-slate-700/80 rounded-lg rounded-tl-none">
                            <p class="text-sm">Romans 5 beautifully explains grace as God's unmerited favor. Paul contrasts Adam's sin bringing death with Christ's sacrifice bringing life and justification...</p>
                        </div>
                    </div>
                </div>
                <div class="p-4 border-t border-amber-900/10">
                    <div class="flex space-x-2">
                        <input type="text" placeholder="Ask a theological question..." class="flex-1 px-4 py-2 rounded-lg border border-amber-300 bg-white dark:bg-slate-700 text-sm">
                        <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"/></svg>
                        </button>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>

        <!-- 6. Sermons & Media -->
        <template id="window-template-sermons">
            <article data-app-id="sermons" class="window hidden absolute flex flex-col w-[600px] h-[500px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-green-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z"/>
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Sermons & Media</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls">
                        <button class="h-4 w-4 rounded-full bg-yellow-400" data-action="minimize"></button>
                        <button class="h-4 w-4 rounded-full bg-green-400" data-action="maximize"></button>
                        <button class="h-4 w-4 rounded-full bg-red-400" data-action="close"></button>
                    </div>
                </div>
                <div class="window-content flex-1 p-6 overflow-y-auto space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/30 dark:to-emerald-800/30 p-4 rounded-xl cursor-pointer hover:shadow-lg transition-all">
                            <div class="aspect-video bg-green-600 rounded-lg mb-3 flex items-center justify-center">
                                <svg class="h-12 w-12 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"/></svg>
                            </div>
                            <h4 class="font-semibold text-sm text-green-900 dark:text-green-200">Living by Faith</h4>
                            <p class="text-xs text-green-700 dark:text-green-400 mt-1">Pastor John • 42:18</p>
                        </div>
                        <div class="bg-gradient-to-br from-blue-50 to-sky-100 dark:from-blue-900/30 dark:to-sky-800/30 p-4 rounded-xl cursor-pointer hover:shadow-lg transition-all">
                            <div class="aspect-video bg-sky-600 rounded-lg mb-3 flex items-center justify-center">
                                <svg class="h-12 w-12 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"/></svg>
                            </div>
                            <h4 class="font-semibold text-sm text-sky-900 dark:text-sky-200">God's Grace</h4>
                            <p class="text-xs text-sky-700 dark:text-sky-400 mt-1">Pastor Sarah • 38:45</p>
                        </div>
                    </div>
                    <div class="border-t border-amber-200 dark:border-amber-800 pt-4">
                        <h4 class="font-semibold mb-3">Worship Music</h4>
                        <div class="flex items-center space-x-3 p-2 bg-white/60 dark:bg-slate-800/60 rounded-lg hover:bg-white/80 cursor-pointer">
                            <div class="h-10 w-10 bg-amber-600 rounded-lg flex items-center justify-center">
                                <svg class="h-5 w-5 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"/></svg>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium">How Great Thou Art</p>
                                <p class="text-xs text-slate-600 dark:text-slate-400">Classic Hymns</p>
                            </div>
                            <span class="text-xs">3:45</span>
                        </div>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>

        <!-- 7. Spiritual Journey -->
        <template id="window-template-journeys">
            <article data-app-id="journeys" class="window hidden absolute flex flex-col w-[550px] h-[550px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-purple-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M22 10l-6-6H8l-6 6v8l6 6h8l6-6v-8zM12 13c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/>
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Spiritual Journey</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls">
                        <button class="h-4 w-4 rounded-full bg-yellow-400" data-action="minimize"></button>
                        <button class="h-4 w-4 rounded-full bg-green-400" data-action="maximize"></button>
                        <button class="h-4 w-4 rounded-full bg-red-400" data-action="close"></button>
                    </div>
                </div>
                <div class="window-content flex-1 p-6 overflow-y-auto space-y-6">
                    <div class="bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-900/20 dark:to-yellow-900/20 p-4 rounded-xl border border-amber-200">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-bold text-amber-900 dark:text-amber-200">7-Day Streak!</h3>
                            <span class="text-2xl font-bold text-amber-600">7</span>
                        </div>
                        <div class="h-2 bg-amber-200 dark:bg-amber-900 rounded-full overflow-hidden">
                            <div class="h-full bg-amber-600 rounded-full" style="width: 70%"></div>
                        </div>
                        <p class="text-xs text-amber-700 dark:text-amber-400 mt-2">3 days from 10-day milestone</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-3">Active Goals</h4>
                        <div class="space-y-3">
                            <div class="p-4 bg-white/60 dark:bg-slate-800/60 rounded-lg">
                                <div class="flex items-center justify-between mb-2">
                                    <h5 class="font-semibold">Memorize Psalm 23</h5>
                                    <span class="text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-700 px-2 py-1 rounded-full">Faith</span>
                                </div>
                                <div class="h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden mb-2">
                                    <div class="h-full bg-purple-600 rounded-full" style="width: 60%"></div>
                                </div>
                                <p class="text-xs">60% complete</p>
                            </div>
                            <div class="p-4 bg-white/60 dark:bg-slate-800/60 rounded-lg">
                                <div class="flex items-center justify-between mb-2">
                                    <h5 class="font-semibold">30 Days of Prayer</h5>
                                    <span class="text-xs bg-green-100 dark:bg-green-900/30 text-green-700 px-2 py-1 rounded-full">Character</span>
                                </div>
                                <div class="h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden mb-2">
                                    <div class="h-full bg-green-600 rounded-full" style="width: 40%"></div>
                                </div>
                                <p class="text-xs">Day 12/30</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>

        <!-- 8. Spiritual Library -->
        <template id="window-template-library">
            <article data-app-id="library" class="window hidden absolute flex flex-col w-[550px] h-[550px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-teal-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"/>
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Spiritual Library</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls">
                        <button class="h-4 w-4 rounded-full bg-yellow-400" data-action="minimize"></button>
                        <button class="h-4 w-4 rounded-full bg-green-400" data-action="maximize"></button>
                        <button class="h-4 w-4 rounded-full bg-red-400" data-action="close"></button>
                    </div>
                </div>
                <div class="window-content flex-1 p-6 overflow-y-auto">
                    <div class="grid grid-cols-3 gap-4 mb-6">
                        <button class="p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg hover:bg-amber-100 transition-colors">
                            <svg class="h-8 w-8 text-amber-600 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20"><path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"/></svg>
                            <p class="text-xs font-medium">All Books</p>
                        </button>
                        <button class="p-3 bg-sky-50 dark:bg-sky-900/20 rounded-lg hover:bg-sky-100 transition-colors">
                            <svg class="h-8 w-8 text-sky-600 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11 4a1 1 0 10-2 0v4a1 1 0 102 0V7zm-3 1a1 1 0 10-2 0v3a1 1 0 102 0V8zM8 9a1 1 0 00-2 0v2a1 1 0 102 0V9z"/></svg>
                            <p class="text-xs font-medium">Studies</p>
                        </button>
                        <button class="p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg hover:bg-purple-100 transition-colors">
                            <svg class="h-8 w-8 text-purple-600 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20"><path d="M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V9.236a1 1 0 00-1.447-.894l-4 2a1 1 0 00-.553.894V17zM15.211 6.276a1 1 0 000-1.788l-4.764-2.382a1 1 0 00-.894 0L4.789 4.488a1 1 0 000 1.788l4.764 2.382a1 1 0 00.894 0l4.764-2.382zM4.447 8.342A1 1 0 003 9.236V15a1 1 0 00.553.894l4 2A1 1 0 009 17v-5.764a1 1 0 00-.553-.894l-4-2z"/></svg>
                            <p class="text-xs font-medium">Resources</p>
                        </button>
                    </div>
                    <div class="space-y-2">
                        <div class="flex items-center p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg hover:bg-white/80 cursor-pointer">
                            <svg class="h-10 w-10 text-red-500 mr-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"/></svg>
                            <div class="flex-1">
                                <p class="text-sm font-semibold">Mere Christianity</p>
                                <p class="text-xs text-slate-600 dark:text-slate-400">C.S. Lewis • PDF</p>
                            </div>
                        </div>
                        <div class="flex items-center p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg hover:bg-white/80 cursor-pointer">
                            <svg class="h-10 w-10 text-blue-500 mr-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"/></svg>
                            <div class="flex-1">
                                <p class="text-sm font-semibold">Theology Study Notes</p>
                                <p class="text-xs text-slate-600 dark:text-slate-400">Personal Notes • DOC</p>
                            </div>
                        </div>
                        <div class="flex items-center p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg hover:bg-white/80 cursor-pointer">
                            <svg class="h-10 w-10 text-green-500 mr-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"/></svg>
                            <div class="flex-1">
                                <p class="text-sm font-semibold">Romans Commentary</p>
                                <p class="text-xs text-slate-600 dark:text-slate-400">Matthew Henry • PDF</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>

        <!-- 9. SyncNote -->
        <template id="window-template-syncnote">
            <article data-app-id="syncnote" class="window hidden absolute flex flex-col w-[550px] h-[550px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-emerald-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">SyncNote</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls">
                        <button class="h-4 w-4 rounded-full bg-yellow-400" data-action="minimize"></button>
                        <button class="h-4 w-4 rounded-full bg-green-400" data-action="maximize"></button>
                        <button class="h-4 w-4 rounded-full bg-red-400" data-action="close"></button>
                    </div>
                </div>
                <div class="window-content flex-1 p-6 overflow-y-auto space-y-4">
                    <textarea class="w-full h-64 px-4 py-3 rounded-lg border border-amber-300 bg-white/80 dark:bg-slate-800/80 resize-none" placeholder="Capture your thoughts, insights, and revelations..."></textarea>
                    <div class="flex space-x-2">
                        <button class="px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 text-sm font-medium flex items-center gap-2">
                            <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/></svg>
                            Save Note
                        </button>
                        <button class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm font-medium flex items-center gap-2">
                            <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20"><path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"/></svg>
                            AI Analyze
                        </button>
                    </div>
                    <div class="border-t border-amber-200 dark:border-amber-800 pt-4">
                        <div class="flex items-center justify-between mb-3">
                            <h4 class="font-semibold">AI Suggested Tags</h4>
                            <button class="text-xs text-amber-600 hover:text-amber-700">Clear</button>
                        </div>
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="px-3 py-1 bg-sky-100 dark:bg-sky-900/30 text-sky-700 dark:text-sky-300 rounded-full text-sm">#Prayer</span>
                            <span class="px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full text-sm">#Faith</span>
                            <span class="px-3 py-1 bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-300 rounded-full text-sm">#Gratitude</span>
                        </div>
                        <h4 class="font-semibold mb-3">Recent Notes</h4>
                        <div class="p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg">
                            <p class="text-xs text-amber-600 mb-2">Oct 9, 2025 • 9:32 AM</p>
                            <p class="text-sm line-clamp-2">God spoke to my heart during worship today about trusting His timing...</p>
                            <div class="flex gap-2 mt-2">
                                <span class="text-xs px-2 py-0.5 bg-sky-100 dark:bg-sky-900/30 text-sky-700 rounded-full">#Prayer</span>
                                <span class="text-xs px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 rounded-full">#Faith</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>

        <!-- 10. Flourishing Tracker -->
        <template id="window-template-flourish">
            <article data-app-id="flourish" class="window hidden absolute flex flex-col w-[550px] h-[550px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-cyan-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Human Flourishing</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls">
                        <button class="h-4 w-4 rounded-full bg-yellow-400" data-action="minimize"></button>
                        <button class="h-4 w-4 rounded-full bg-green-400" data-action="maximize"></button>
                        <button class="h-4 w-4 rounded-full bg-red-400" data-action="close"></button>
                    </div>
                </div>
                <div class="window-content flex-1 p-6 overflow-y-auto space-y-6">
                    <div class="text-center">
                        <div class="inline-flex items-center justify-center w-32 h-32 rounded-full bg-gradient-to-br from-cyan-100 to-cyan-200 dark:from-cyan-900/30 dark:to-cyan-800/30 mb-3">
                            <div class="text-center">
                                <div class="text-4xl font-bold text-cyan-700 dark:text-cyan-300">84</div>
                                <div class="text-xs text-cyan-600 dark:text-cyan-400">Thriving</div>
                            </div>
                        </div>
                        <h3 class="text-lg font-semibold">Flourishing Index</h3>
                    </div>
                    <div class="space-y-3">
                        <div>
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-sm font-medium">Health</span>
                                <span class="text-sm text-green-600">85</span>
                            </div>
                            <div class="h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full bg-green-600 rounded-full" style="width: 85%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-sm font-medium">Relationships</span>
                                <span class="text-sm text-rose-600">72</span>
                            </div>
                            <div class="h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full bg-rose-600 rounded-full" style="width: 72%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-sm font-medium">Finances</span>
                                <span class="text-sm text-amber-600">68</span>
                            </div>
                            <div class="h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full bg-amber-600 rounded-full" style="width: 68%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-sm font-medium">Meaning</span>
                                <span class="text-sm text-purple-600">82</span>
                            </div>
                            <div class="h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full bg-purple-600 rounded-full" style="width: 82%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-sm font-medium">Happiness</span>
                                <span class="text-sm text-yellow-600">76</span>
                            </div>
                            <div class="h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full bg-yellow-600 rounded-full" style="width: 76%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-sm font-medium">Character</span>
                                <span class="text-sm text-indigo-600">79</span>
                            </div>
                            <div class="h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full bg-indigo-600 rounded-full" style="width: 79%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-sm font-medium">Faith</span>
                                <span class="text-sm text-sky-600">84</span>
                            </div>
                            <div class="h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full bg-sky-600 rounded-full" style="width: 84%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="p-4 bg-amber-50/50 dark:bg-amber-900/20 rounded-lg border-l-4 border-amber-600">
                        <div class="flex items-start gap-2">
                            <svg class="h-5 w-5 text-amber-600 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"/></svg>
                            <div class="flex-1">
                                <p class="text-sm font-semibold text-amber-900 dark:text-amber-200">AI Insight</p>
                                <p class="text-sm text-amber-800 dark:text-amber-300 mt-1">Your Relationships score dropped 8% this week. Consider engaging more with Faith Circles.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>

        <!-- 11. Mood Tracker -->
        <template id="window-template-mood">
            <article data-app-id="mood" class="window hidden absolute flex flex-col w-[550px] h-[550px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-yellow-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Mood Tracker</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls">
                        <button class="h-4 w-4 rounded-full bg-yellow-400" data-action="minimize"></button>
                        <button class="h-4 w-4 rounded-full bg-green-400" data-action="maximize"></button>
                        <button class="h-4 w-4 rounded-full bg-red-400" data-action="close"></button>
                    </div>
                </div>
                <div class="window-content flex-1 p-6 overflow-y-auto space-y-6">
                    <div>
                        <h3 class="font-semibold mb-3">How are you feeling today?</h3>
                        <div class="grid grid-cols-3 gap-3">
                            <button class="p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg hover:bg-white/80 hover:scale-110 transition-all text-center">
                                <div class="text-3xl mb-1">😊</div>
                                <p class="text-xs font-medium">Joyful</p>
                            </button>
                            <button class="p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg hover:bg-white/80 hover:scale-110 transition-all text-center">
                                <div class="text-3xl mb-1">😌</div>
                                <p class="text-xs font-medium">Peaceful</p>
                            </button>
                            <button class="p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg hover:bg-white/80 hover:scale-110 transition-all text-center">
                                <div class="text-3xl mb-1">🙏</div>
                                <p class="text-xs font-medium">Grateful</p>
                            </button>
                            <button class="p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg hover:bg-white/80 hover:scale-110 transition-all text-center">
                                <div class="text-3xl mb-1">😢</div>
                                <p class="text-xs font-medium">Sad</p>
                            </button>
                            <button class="p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg hover:bg-white/80 hover:scale-110 transition-all text-center">
                                <div class="text-3xl mb-1">😰</div>
                                <p class="text-xs font-medium">Anxious</p>
                            </button>
                            <button class="p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg hover:bg-white/80 hover:scale-110 transition-all text-center">
                                <div class="text-3xl mb-1">😠</div>
                                <p class="text-xs font-medium">Angry</p>
                            </button>
                        </div>
                    </div>
                    <div class="border-t border-amber-200 dark:border-amber-800 pt-4">
                        <h4 class="font-semibold mb-3">This Week</h4>
                        <div class="flex items-end justify-between h-32 gap-2">
                            <div class="flex-1 flex flex-col items-center">
                                <div class="w-full bg-green-500 rounded-t" style="height: 70%"></div>
                                <p class="text-xs mt-1">😊</p>
                                <p class="text-xs text-slate-500">Mon</p>
                            </div>
                            <div class="flex-1 flex flex-col items-center">
                                <div class="w-full bg-blue-500 rounded-t" style="height: 85%"></div>
                                <p class="text-xs mt-1">😌</p>
                                <p class="text-xs text-slate-500">Tue</p>
                            </div>
                            <div class="flex-1 flex flex-col items-center">
                                <div class="w-full bg-yellow-500 rounded-t" style="height: 60%"></div>
                                <p class="text-xs mt-1">🙏</p>
                                <p class="text-xs text-slate-500">Wed</p>
                            </div>
                            <div class="flex-1 flex flex-col items-center">
                                <div class="w-full bg-red-500 rounded-t" style="height: 40%"></div>
                                <p class="text-xs mt-1">😢</p>
                                <p class="text-xs text-slate-500">Thu</p>
                            </div>
                            <div class="flex-1 flex flex-col items-center">
                                <div class="w-full bg-purple-500 rounded-t" style="height: 90%"></div>
                                <p class="text-xs mt-1">😊</p>
                                <p class="text-xs text-slate-500">Fri</p>
                            </div>
                        </div>
                    </div>
                    <div class="border-t border-amber-200 dark:border-amber-800 pt-4">
                        <h4 class="font-semibold mb-3">Recent Entries</h4>
                        <div class="p-3 bg-white/60 dark:bg-slate-800/60 rounded-lg">
                            <div class="flex items-start gap-3">
                                <div class="text-2xl">😊</div>
                                <div class="flex-1">
                                    <p class="font-semibold text-sm">Joyful</p>
                                    <p class="text-xs text-slate-600 dark:text-slate-400 mt-1">Morning devotional was uplifting</p>
                                    <p class="text-xs text-amber-600 mt-1">Today at 9:30 AM</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>

        <!-- 12. Prayer Chain -->
        <template id="window-template-prayerchain">
            <article data-app-id="prayerchain" class="window hidden absolute flex flex-col w-[550px] h-[550px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-violet-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Prayer Chain</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls">
                        <button class="h-4 w-4 rounded-full bg-yellow-400" data-action="minimize"></button>
                        <button class="h-4 w-4 rounded-full bg-green-400" data-action="maximize"></button>
                        <button class="h-4 w-4 rounded-full bg-red-400" data-action="close"></button>
                    </div>
                </div>
                <div class="window-content flex-1 p-6 overflow-y-auto space-y-4">
                    <div class="flex space-x-2">
                        <input type="text" placeholder="Share a prayer request..." class="flex-1 px-4 py-2 rounded-lg border border-amber-300 bg-white dark:bg-slate-700 text-sm">
                        <button class="px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700">Send</button>
                    </div>
                    <div class="relative">
                        <div class="absolute left-6 top-0 bottom-0 w-0.5 bg-violet-200 dark:bg-violet-800"></div>
                        <div class="space-y-6">
                            <div class="relative pl-12">
                                <div class="absolute left-4 top-2 h-4 w-4 rounded-full bg-purple-600"></div>
                                <div class="bg-white/60 dark:bg-slate-800/60 rounded-lg p-4">
                                    <div class="flex items-start gap-3">
                                        <img src="https://i.pravatar.cc/150?u=sarah2" class="h-8 w-8 rounded-full">
                                        <div class="flex-1">
                                            <p class="font-semibold text-sm">Sarah M.</p>
                                            <p class="text-sm mt-1">Please pray for my job interview tomorrow. Trusting God's timing.</p>
                                            <div class="flex items-center gap-4 mt-2 text-xs text-slate-600 dark:text-slate-400">
                                                <span class="flex items-center gap-1">
                                                    <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
                                                    42 praying
                                                </span>
                                                <span>2 hours ago</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="relative pl-12">
                                <div class="absolute left-4 top-2 h-4 w-4 rounded-full bg-green-600"></div>
                                <div class="bg-green-50/60 dark:bg-green-900/20 rounded-lg p-4 border-l-4 border-green-600">
                                    <div class="flex items-start gap-3">
                                        <img src="https://i.pravatar.cc/150?u=david" class="h-8 w-8 rounded-full">
                                        <div class="flex-1">
                                            <p class="font-semibold text-sm flex items-center gap-2">
                                                David L.
                                                <span class="text-xs bg-green-600 text-white px-2 py-0.5 rounded-full">Answered</span>
                                            </p>
                                            <p class="text-sm mt-1">Update: My father's surgery went well! Thank you all for praying.</p>
                                            <div class="flex items-center gap-4 mt-2 text-xs text-slate-600 dark:text-slate-400">
                                                <span class="flex items-center gap-1">
                                                    <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
                                                    28 praying
                                                </span>
                                                <span>5 hours ago</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ml-11 mt-3 pl-4 border-l-2 border-green-200 dark:border-green-800">
                                        <div class="p-2 bg-white/60 dark:bg-slate-800/60 rounded text-sm">
                                            <p class="font-semibold text-xs">Maria S.</p>
                                            <p class="text-xs mt-1">Praise God! So happy to hear this!</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>
        
        <!-- 13. Songs -->
        <template id="window-template-songs">
            <article data-app-id="songs" class="window hidden absolute flex flex-col w-[600px] h-[550px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-pink-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                          <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z" />
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Songs</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls group">
                        <button class="h-4 w-4 rounded-full bg-yellow-400" data-action="minimize"></button>
                        <button class="h-4 w-4 rounded-full bg-green-400" data-action="maximize"></button>
                        <button class="h-4 w-4 rounded-full bg-red-400" data-action="close"></button>
                    </div>
                </div>
                <div class="p-3 bg-white/50 dark:bg-slate-800/50 border-b border-amber-900/10">
                    <input type="text" placeholder="Search for a song or artist..." class="w-full px-4 py-2 text-sm rounded-lg border border-amber-300 bg-white dark:bg-slate-700">
                </div>
                <div class="window-content flex-1 p-4 overflow-y-auto space-y-3">
                    <!-- Song Item 1 -->
                    <div class="flex items-center space-x-4 p-2 rounded-lg hover:bg-amber-100/50">
                        <img src="https://placehold.co/120x90/f0abfc/333?text=Worship" alt="Song thumbnail" class="w-24 h-16 object-cover rounded-md">
                        <div class="flex-1">
                            <h4 class="font-semibold text-sm">10,000 Reasons (Bless the Lord)</h4>
                            <p class="text-xs text-slate-600 dark:text-slate-400">Matt Redman</p>
                        </div>
                    </div>
                    <!-- Song Item 2 -->
                    <div class="flex items-center space-x-4 p-2 rounded-lg hover:bg-amber-100/50">
                        <img src="https://placehold.co/120x90/a78bfa/333?text=Praise" alt="Song thumbnail" class="w-24 h-16 object-cover rounded-md">
                        <div class="flex-1">
                            <h4 class="font-semibold text-sm">What A Beautiful Name</h4>
                            <p class="text-xs text-slate-600 dark:text-slate-400">Hillsong Worship</p>
                        </div>
                    </div>
                    <!-- Song Item 3 -->
                     <div class="flex items-center space-x-4 p-2 rounded-lg hover:bg-amber-100/50">
                        <img src="https://placehold.co/120x90/818cf8/333?text=Hymn" alt="Song thumbnail" class="w-24 h-16 object-cover rounded-md">
                        <div class="flex-1">
                            <h4 class="font-semibold text-sm">Amazing Grace (My Chains Are Gone)</h4>
                            <p class="text-xs text-slate-600 dark:text-slate-400">Chris Tomlin</p>
                        </div>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>
        
        <!-- 14. Videos -->
        <template id="window-template-videos">
            <article data-app-id="videos" class="window hidden absolute flex flex-col w-[600px] h-[550px] stained-glass-effect rounded-2xl shadow-2xl overflow-hidden">
                <div class="window-header flex items-center justify-between h-11 bg-amber-100/80 dark:bg-amber-900/80 border-b border-amber-900/20 px-4 cursor-move">
                    <div class="flex items-center space-x-2">
                        <svg class="h-6 w-6 text-blue-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                           <path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" />
                        </svg>
                        <h2 class="text-sm font-semibold text-amber-900 dark:text-amber-200">Videos</h2>
                    </div>
                    <div class="flex items-center space-x-1.5 window-controls group">
                        <button class="h-4 w-4 rounded-full bg-yellow-400" data-action="minimize"></button>
                        <button class="h-4 w-4 rounded-full bg-green-400" data-action="maximize"></button>
                        <button class="h-4 w-4 rounded-full bg-red-400" data-action="close"></button>
                    </div>
                </div>
                <div class="p-3 bg-white/50 dark:bg-slate-800/50 border-b border-amber-900/10">
                    <input type="text" placeholder="Search for a video..." class="w-full px-4 py-2 text-sm rounded-lg border border-amber-300 bg-white dark:bg-slate-700">
                </div>
                <div class="window-content flex-1 p-4 overflow-y-auto space-y-3">
                    <!-- Video Item 1 -->
                    <div class="flex items-center space-x-4 p-2 rounded-lg hover:bg-amber-100/50">
                        <img src="https://placehold.co/120x90/38bdf8/333?text=Sermon" alt="Video thumbnail" class="w-24 h-16 object-cover rounded-md">
                        <div class="flex-1">
                            <h4 class="font-semibold text-sm">The Cost of Discipleship</h4>
                            <p class="text-xs text-slate-600 dark:text-slate-400">A powerful sermon on following Christ.</p>
                        </div>
                    </div>
                    <!-- Video Item 2 -->
                    <div class="flex items-center space-x-4 p-2 rounded-lg hover:bg-amber-100/50">
                        <img src="https://placehold.co/120x90/34d399/333?text=Testimony" alt="Video thumbnail" class="w-24 h-16 object-cover rounded-md">
                        <div class="flex-1">
                            <h4 class="font-semibold text-sm">My Testimony of Faith</h4>
                            <p class="text-xs text-slate-600 dark:text-slate-400">How God changed my life.</p>
                        </div>
                    </div>
                </div>
                <div class="resize-handle"></div>
            </article>
        </template>


    </main>
    
    <!-- LAUNCHPAD -->
    <div id="launchpad" class="hidden fixed inset-0 z-[200] bg-slate-900/80 backdrop-blur-2xl p-8 pt-20 transition-opacity duration-300">
        <div class="max-w-screen-xl mx-auto">
            <div class="relative mb-8">
                <svg class="absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-amber-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                </svg>
                <input id="launchpad-search" type="text" placeholder="Search apps..." class="w-full text-lg bg-amber-900/30 rounded-xl py-3 pl-12 pr-4 text-white placeholder-amber-400/60 focus:outline-none focus:ring-2 focus:ring-amber-500 border border-amber-700/30">
            </div>
            <div id="launchpad-grid" class="grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-7 xl:grid-cols-8 gap-8 text-white">
            </div>
        </div>
    </div>

    <!-- BOTTOM DOCK -->
    <footer class="fixed bottom-4 left-0 right-0 z-[100] flex justify-center pointer-events-none">
        <div id="dock" class="flex items-end h-16 space-x-2 rounded-2xl border border-amber-900/30 dark:border-amber-200/20 bg-white/60 dark:bg-slate-900/60 p-2 shadow-2xl backdrop-blur-md pointer-events-auto">
            <button id="launchpad-toggle" class="group h-12 w-12 flex items-center justify-center rounded-xl hover:bg-amber-100/80 dark:hover:bg-amber-900/50 transition-all duration-300 transform dock-hover">
                <svg class="h-7 w-7 text-amber-700 dark:text-amber-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" />
                </svg>
            </button>
            <div class="h-10 border-l border-amber-400/40 dark:border-amber-600/40"></div>
        </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const desktop = document.getElementById('desktop');
            const desktopIconsContainer = document.getElementById('desktop-icons');
            const tileViewContainer = document.getElementById('tile-view');
            const tilesContainer = document.getElementById('tiles-container');
            const viewModeToggle = document.getElementById('view-mode-toggle');
            
            const dock = document.getElementById('dock');
            const launchpad = document.getElementById('launchpad');
            const launchpadToggle = document.getElementById('launchpad-toggle');
            const launchpadGrid = document.getElementById('launchpad-grid');
            const launchpadSearch = document.getElementById('launchpad-search');

            let zIndexCounter = 1000;
            const openWindows = {};

            const apps = [
                // I've merged the data for tile view (color, size, content) into the main apps array.
                // The 'flourish' app is placed first to ensure it's the first tile.
                // UPDATED: Adjusted sizes for a tighter grid and colors for a softer, pastel look.
                { id: 'flourish', name: 'Human Flourishing', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-full h-full"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>', favorite: false, color: 'bg-indigo-500', size: 'tile-lg', 
                  liveContent: `<div class="flex flex-col justify-between h-full">
                                <div>
                                    <div class="text-xs font-medium uppercase tracking-wider opacity-80">Primary Metric: Human Flourishing</div>
                                    <div class="flex items-end mt-1">
                                        <span class="text-6xl font-extrabold leading-none">84</span>
                                        <span class="text-2xl font-semibold ml-2 opacity-70">/100</span>
                                    </div>
                                    <h4 class="text-lg font-semibold mt-2">Flourishing Index (FI)</h4>
                                </div>
                                <div class="flex gap-4 items-end">
                                    <div class="space-y-1 text-xs flex-1">
                                        <div class="flex justify-between"><span>Intimacy (Personal)</span> <span>88%</span></div>
                                        <div class="flex justify-between"><span>Intentionality (Action)</span> <span>79%</span></div>
                                        <div class="flex justify-between"><span>Belonging (Community)</span> <span>85%</span></div>
                                    </div>
                                    <div class="w-16 h-16 bg-black/10 rounded-lg flex items-center justify-center text-4xl opacity-70">?</div>
                                </div>
                            </div>` },
                { id: 'bible', name: 'Bible', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-full h-full text-amber-700"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/></svg>', favorite: true, color: 'bg-cyan-500', size: 'tile-wide', liveContent: 'Your latest Scripture:<br>"For God so loved the world..."' },
                { id: 'devotionals', name: 'Devotionals', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-full h-full text-amber-600"><path d="M12 2C10.34 2 9 3.34 9 5s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm0 14c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>', favorite: true, color: 'bg-emerald-500', size: 'tile-small', liveContent: "Today's Reflection:<br>Faith is the assurance..." },
                { id: 'prayer', name: 'Prayer Journal', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-full h-full text-sky-600"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/></svg>', favorite: true, color: 'bg-rose-500', size: 'tile-lg', liveContent: '<div class="text-6xl font-bold -mb-2">7</div><div class="mt-1">Active Requests</div><div class="text-xs mt-2 opacity-80">1 Answered</div>' },
                { id: 'sermons', name: 'Sermons', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-full h-full text-green-600"><path d="M12 3v9.28c-.47-.17-.97-.28-1.5-.28C8.01 12 6 14.01 6 16.5S8.01 21 10.5 21c2.31 0 4.2-1.75 4.45-4H15V6h4V3h-7z"/></svg>', favorite: true, color: 'bg-lime-600', size: 'tile-wide', liveContent: 'Latest: "Living by Faith"<br>Pastor John • 42:18' },
                { id: 'circles', name: 'Faith Circles', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-full h-full text-rose-600"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>', favorite: true, color: 'bg-violet-500', size: 'tile-small', liveContent: '<div class="text-5xl font-bold">2</div><div>New Messages</div>' },
                { id: 'journeys', name: 'Journeys', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-full h-full text-purple-600"><path d="M22 10l-6-6H8l-6 6v8l6 6h8l6-6v-8zM12 13c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>', favorite: true, color: 'bg-teal-500', size: 'tile-wide', liveContent: 'Goal: Psalm 23 Memo<div class="h-1.5 w-full bg-white/30 rounded-full mt-2"><div class="h-1.5 bg-white rounded-full" style="width: 60%"></div></div>' },
                { id: 'syncnote', name: 'SyncNote', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-full h-full text-emerald-600"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>', favorite: false, color: 'bg-amber-500', size: 'tile-small', liveContent: 'AI-Tags your thoughts...' },
                { id: 'mood', name: 'Mood Tracker', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-full h-full text-yellow-600"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/></svg>', favorite: false, color: 'bg-orange-400', size: 'tile-small', liveContent: 'How are you feeling?' },
                { id: 'minds', name: 'Spiritual Guide', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-full h-full text-indigo-600"><path d="M21 15v4c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h16c.55 0 1 .45 1 1zm-10.5 2h-2v-2h2v2zm4.5 0h-2v-2h2v2z"/></svg>', favorite: false, color: 'bg-purple-500', size: 'tile-small', liveContent: 'Ask spiritual questions...' },
                { id: 'library', name: 'Library', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-full h-full text-teal-600"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"/></svg>', favorite: false, color: 'bg-sky-500', size: 'tile-small', liveContent: '12 Resources' },
                { id: 'songs', name: 'Songs', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-full h-full"><path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z" /></svg>', favorite: false, color: 'bg-fuchsia-500', size: 'tile-wide', liveContent: 'Search for worship songs' },
                { id: 'videos', name: 'Videos', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-full h-full"><path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" /></svg>', favorite: false, color: 'bg-blue-500', size: 'tile-wide', liveContent: 'Your video library' },
                { id: 'prayerchain', name: 'Prayer Chain', icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-full h-full text-violet-600"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>', favorite: false, color: 'bg-pink-500', size: 'tile-wide', liveContent: '3 New Prayer Requests' },
            ];

            function generateAppIcons() {
                // To keep the app list consistent, we sort a copy for the icon/launchpad views
                const sortedApps = [...apps].sort((a, b) => a.name.localeCompare(b.name));
                sortedApps.forEach(app => {
                    const desktopIconEl = document.createElement('button');
                    desktopIconEl.className = 'desktop-icon';
                    desktopIconEl.dataset.appId = app.id;
                    desktopIconEl.innerHTML = `<div class="w-14 h-14">${app.icon}</div><span>${app.name}</span>`;
                    desktopIconsContainer.appendChild(desktopIconEl);

                    if (app.favorite) {
                        const dockItemEl = document.createElement('button');
                        dockItemEl.className = 'dock-item group h-12 w-12 flex items-center justify-center rounded-xl hover:bg-amber-100/80 dark:hover:bg-amber-900/50 transition-all duration-300 transform dock-hover relative';
                        dockItemEl.dataset.appId = app.id;
                        dockItemEl.innerHTML = `<div class="w-9 h-9">${app.icon}</div>`;
                        dock.appendChild(dockItemEl);
                    }
                    
                    const launchpadIconEl = document.createElement('button');
                    launchpadIconEl.className = 'flex flex-col items-center space-y-2 transition-transform duration-200 hover:scale-110 launchpad-item';
                    launchpadIconEl.dataset.appName = app.name.toLowerCase();
                    launchpadIconEl.dataset.appId = app.id;
                    launchpadIconEl.innerHTML = `<div class="w-16 h-16 p-2 bg-amber-900/30 rounded-2xl hover:bg-amber-900/50 transition-colors">${app.icon}</div><span class="text-sm">${app.name}</span>`;
                    launchpadGrid.appendChild(launchpadIconEl);
                });
            }

            function generateTiles() {
                tilesContainer.innerHTML = ''; // Clear existing tiles
                // The order in the `apps` array now dictates the tile layout
                apps.forEach(app => {
                    const tileEl = document.createElement('div');
                    tileEl.className = `tile ${app.color} ${app.size}`;
                    tileEl.dataset.appId = app.id;
                    // For the main flourish tile, we don't show the name/icon inside, just the live content
                    if (app.id === 'flourish') {
                         tileEl.innerHTML = `<div class="tile-content">${app.liveContent}</div>`;
                    } else {
                        tileEl.innerHTML = `
                            <div class="tile-icon text-white/80">${app.icon}</div>
                            <div>
                                <h3 class="tile-name">${app.name}</h3>
                                <div class="tile-content">${app.liveContent}</div>
                            </div>
                        `;
                    }
                    tilesContainer.appendChild(tileEl);
                });
            }

            function handleAppLaunch(appId) {
                const existingWindow = openWindows[appId];
                
                if (existingWindow) {
                    if (existingWindow.classList.contains('hidden')) {
                        existingWindow.classList.remove('hidden');
                        focusWindow(existingWindow);
                    } else {
                        focusWindow(existingWindow); // Bring to front if already open
                    }
                } else {
                    openWindow(appId);
                    updateDockIndicator(appId, true);
                }
                
                if (!launchpad.classList.contains('hidden')) toggleLaunchpad();
            }
            
            const themeToggle = document.getElementById('theme-toggle');
            const lightIcon = document.getElementById('theme-icon-light');
            const darkIcon = document.getElementById('theme-icon-dark');
            
            if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                lightIcon.classList.add('hidden');
                darkIcon.classList.remove('hidden');
            }

            themeToggle.addEventListener('click', () => {
                document.documentElement.classList.toggle('dark');
                lightIcon.classList.toggle('hidden');
                darkIcon.classList.toggle('hidden');
                localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
            });

            function focusWindow(windowEl) { 
                if (windowEl) windowEl.style.zIndex = ++zIndexCounter; 
            }

            function openWindow(appId, position) {
                if (openWindows[appId]) {
                    const win = openWindows[appId];
                    if (win.classList.contains('hidden')) win.classList.remove('hidden');
                    focusWindow(win);
                    return;
                }

                const template = document.getElementById(`window-template-${appId}`);
                if (!template) { 
                    console.warn(`No window template found for app: ${appId}`); 
                    return; 
                }

                const windowEl = template.content.cloneNode(true).firstElementChild;
                desktop.appendChild(windowEl);
                openWindows[appId] = windowEl;
                
                windowEl.classList.remove('hidden');
                focusWindow(windowEl);
                initWindowControls(windowEl);
                
                if (position) {
                    windowEl.style.left = position.left;
                    windowEl.style.top = position.top;
                } else {
                    const numWindows = Object.keys(openWindows).length;
                    windowEl.style.left = `calc(${8 + (numWindows * 3)}% + ${numWindows * 20}px)`;
                    windowEl.style.top = `calc(${6 + (numWindows * 3)}% + ${numWindows * 10}px)`;
                }
            }

            function closeWindow(windowEl) {
                const appId = windowEl.dataset.appId;
                delete openWindows[appId];
                windowEl.remove();
                updateDockIndicator(appId, false);
            }

            function minimizeWindow(windowEl) { 
                windowEl.classList.add('hidden'); 
            }

            function maximizeWindow(windowEl) {
                if (windowEl.dataset.isMaximized === 'true') {
                    Object.assign(windowEl.style, { 
                        width: windowEl.dataset.originalWidth, 
                        height: windowEl.dataset.originalHeight, 
                        top: windowEl.dataset.originalTop, 
                        left: windowEl.dataset.originalLeft, 
                        transform: 'translate(0, 0)' 
                    });
                    delete windowEl.dataset.isMaximized;
                    windowEl.classList.remove('transition-all', 'duration-300');
                } else {
                    windowEl.dataset.isMaximized = 'true';
                    Object.assign(windowEl.dataset, { 
                        originalWidth: windowEl.style.width, 
                        originalHeight: windowEl.style.height, 
                        originalTop: windowEl.style.top, 
                        originalLeft: windowEl.style.left 
                    });
                    windowEl.classList.add('transition-all', 'duration-300');
                    Object.assign(windowEl.style, { 
                        width: 'calc(100% - 32px)', 
                        height: 'calc(100% - 32px)', 
                        top: '72px', 
                        left: '16px', 
                        transform: 'translate(0, 0)' 
                    });
                }
            }
            
            function initWindowControls(windowEl) {
                windowEl.addEventListener('mousedown', () => focusWindow(windowEl), true);
                windowEl.querySelector('.window-controls').addEventListener('click', (e) => {
                    const action = e.target.closest('button')?.dataset.action;
                    if (action) e.stopPropagation();
                    if (action === 'close') closeWindow(windowEl);
                    if (action === 'minimize') minimizeWindow(windowEl);
                    if (action === 'maximize') maximizeWindow(windowEl);
                });
            }

            function updateDockIndicator(appId, isActive) {
                let dockItem = dock.querySelector(`[data-app-id="${appId}"]`);
                
                if (isActive) {
                    if (!dockItem) {
                        const app = apps.find(a => a.id === appId);
                        if (app) {
                            dockItem = document.createElement('button');
                            dockItem.className = 'dock-item group h-12 w-12 flex items-center justify-center rounded-xl hover:bg-amber-100/80 dark:hover:bg-amber-900/50 transition-all duration-300 transform dock-hover relative';
                            dockItem.dataset.appId = app.id;
                            dockItem.innerHTML = `<div class="w-9 h-9">${app.icon}</div>`;
                            dock.appendChild(dockItem);
                        }
                    }
                    
                    let indicator = dockItem.querySelector('.active-indicator');
                    if (!indicator) {
                        indicator = document.createElement('div');
                        indicator.className = 'active-indicator absolute bottom-0 left-1/2 -translate-x-1/2 h-1 w-1 bg-amber-600 dark:bg-amber-400 rounded-full';
                        dockItem.appendChild(indicator);
                    }
                } else {
                    if (dockItem) {
                        const indicator = dockItem.querySelector('.active-indicator');
                        if (indicator) indicator.remove();
                        
                        const app = apps.find(a => a.id === appId);
                        if (app && !app.favorite) dockItem.remove();
                    }
                }
            }

            document.body.addEventListener('click', (e) => {
                const icon = e.target.closest('.desktop-icon, .dock-item, .launchpad-item, .tile');
                if (icon) handleAppLaunch(icon.dataset.appId);
            });

            function toggleLaunchpad() {
                if (launchpad.classList.contains('hidden')) {
                    launchpad.classList.remove('hidden');
                    launchpad.style.opacity = '0';
                    setTimeout(() => launchpad.style.opacity = '1', 10);
                    launchpadSearch.focus();
                } else {
                    launchpad.style.opacity = '0';
                    setTimeout(() => launchpad.classList.add('hidden'), 300);
                }
            }
            
            launchpadToggle.addEventListener('click', toggleLaunchpad);
            launchpad.addEventListener('click', (e) => { 
                if (e.target === launchpad) toggleLaunchpad(); 
            });
            
            launchpadSearch.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                document.querySelectorAll('.launchpad-item').forEach(item => {
                    item.style.display = item.dataset.appName.includes(searchTerm) ? 'flex' : 'none';
                });
            });

            // View Mode Toggle Logic
            viewModeToggle.addEventListener('change', (e) => {
                if (e.target.checked) {
                    // Switch to Tile Mode
                    desktopIconsContainer.classList.add('hidden');
                    tileViewContainer.classList.remove('hidden');
                } else {
                    // Switch to Icon Mode (Default)
                    desktopIconsContainer.classList.remove('hidden');
                    tileViewContainer.classList.add('hidden');
                }
            });

            interact('.window').draggable({
                allowFrom: '.window-header',
                inertia: true,
                modifiers: [
                    interact.modifiers.restrictRect({
                        restriction: 'parent',
                        endOnly: true
                    })
                ],
                listeners: {
                    move(event) {
                        const target = event.target;
                        const x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;
                        const y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;
                        target.style.transform = `translate(${x}px, ${y}px)`;
                        target.setAttribute('data-x', x);
                        target.setAttribute('data-y', y);
                    }
                }
            }).resizable({
                edges: { right: true, bottom: true },
                listeners: {
                    move(event) {
                        Object.assign(event.target.style, {
                            width: `${event.rect.width}px`,
                            height: `${event.rect.height}px`
                        });
                    }
                },
                modifiers: [
                    interact.modifiers.restrictSize({
                        min: { width: 320, height: 200 }
                    })
                ],
            });
            
            // Generate all UI elements on load
            generateAppIcons();
            generateTiles();
            
            // Set initial view based on the toggle's default state
            if (viewModeToggle.checked) {
                desktopIconsContainer.classList.add('hidden');
                tileViewContainer.classList.remove('hidden');
            } else {
                desktopIconsContainer.classList.remove('hidden');
                tileViewContainer.classList.add('hidden');
            }
            
            // Open some windows by default for demonstration
            setTimeout(() => {
                openWindow('bible', { left: '180px', top: '80px' });
                updateDockIndicator('bible', true);
                openWindow('minds', { left: '700px', top: '80px' });
                updateDockIndicator('minds', true);
                openWindow('circles', { left: '1220px', top: '80px' });
                updateDockIndicator('circles', true);
            }, 100);
        });
    </script>
</body>
</html>